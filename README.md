# 臻藏拍卖 - 现代化艺术品竞拍平台

纯前端拍卖小游戏，已升级为 **Vite + Firebase Hosting** 部署形态，并支持 **Firebase Realtime Database 云同步（默认开启）**。

## ⭐ 核心特性

### ✅ **管理员发布拍卖品**
- 管理员可以发布新的拍卖品
- 支持自定义标题、艺术家、类别、图片、描述、价格
- 实时管理所有拍卖品状态
- 支持删除拍卖品（自动归档到历史记录）

### ✅ **成员报名系统**
- **一键报名**：快速报名参与拍卖
- **手动填写**：可填写真实姓名、联系电话、备注信息
- 报名后才能参与竞拍（增加真实性）
- 显示每场拍卖的报名人数

### ✅ **智能倒计时机制**
- **初始时间**：3分钟倒计时
- **15秒延时**：有人出价后，如果15秒内无新出价则结束拍卖
- 实时显示延时状态
- 精确到秒的计时器

### ✅ **完整出价系统**
- 需先报名才能出价
- 最低加价100游戏币
- 实时余额检查
- 出价历史记录（显示最近5条）
- AI智能竞价对手

### ✅ **历史记录系统**
- 完整的拍卖历史档案
- 统计数据：总场次、总成交额、成交率
- 详细的拍卖信息展示
- 成交/流拍状态标记
- localStorage永久保存

### ✅ **响应式设计**
- 完美适配手机/平板/电脑
- 流畅的动画效果
- 现代化渐变配色
- 优雅的卡片式布局

## 🎨 **现代化UI设计**

### 渐变色彩方案
- **主渐变**：紫蓝渐变 (#667eea → #764ba2)
- **次渐变**：粉红渐变 (#f093fb → #f5576c)
- **金色渐变**：暖金渐变 (#ffd89b → #19547b)
- **背景渐变**：深色渐变背景，营造高级感

### 动画效果
- 卡片悬停动画（上浮+缩放）
- 按钮交互动画
- 页面切换淡入效果
- 成就通知滑入动画
- 脉冲动画提示

### UI亮点
- 毛玻璃效果导航栏
- 渐变文字标题
- 圆角卡片设计
- 阴影光晕效果
- 流畅的过渡动画

## 🎮 **使用指南**

### 1. 普通用户流程

#### 注册登录
```
1. 点击右上角"登录"按钮
2. 切换到"注册"标签
3. 输入用户名和密码
4. 自动获得10,000游戏币
```

#### 参与拍卖
```
1. 浏览"拍卖目录"，选择心仪的艺术品
2. 点击拍卖品卡片的"立即报名"按钮
3. 选择"一键报名"或"手动填写"
4. 报名成功后点击拍卖品查看详情
5. 输入出价金额，点击"立即出价"
6. 在倒计时结束前成为最高出价者即可赢得拍卖
```

#### 查看历史
```
1. 点击"我的竞拍"查看个人竞拍记录
2. 点击"历史记录"查看所有已结束的拍卖
3. 每日登录可获得500游戏币奖励
```

### 2. 管理员流程

#### 获取管理员权限
```
使用用户名 "admin" 注册账户
自动获得管理员权限
导航栏出现管理员链接
```

#### 发布拍卖品
```
1. 点击导航栏"管理员"链接
2. 点击"发布新拍卖品"按钮
3. 填写拍卖品信息：
   - 名称：例如"星夜"
   - 艺术家：例如"文森特·梵高, 1889"
   - 类别：油画/雕塑/摄影/古董
   - 图片URL：建议使用Unsplash高清图片
   - 描述：详细介绍艺术品
   - 起拍价：最低价格
   - 保留价：低于此价格流拍
4. 点击"发布拍卖品"
```

#### 管理拍卖品
```
1. 在管理员页面查看所有拍卖品
2. 查看每件拍卖品的状态、报名人数
3. 可删除不需要的拍卖品
4. 已结束的拍卖自动归档到历史记录
```

## 💡 **拍卖机制详解**

### 倒计时规则
1. **初始阶段**：每场拍卖3分钟倒计时
2. **出价阶段**：
   - 有人出价后记录时间
   - 如果剩余时间少于15秒，自动延长15秒
3. **延时阶段**：
   - 显示"(延时中)"标记
   - 15秒内如无新出价，拍卖结束
   - 如有新出价，重新计算15秒延时

### 成交规则
- 最高出价者赢得拍卖
- 成交价必须达到保留价
- 未达保留价则流拍
- 自动从赢家钱包扣款

### AI竞价
- 30%概率响应竞价
- 加价范围：100-500游戏币
- 不超过保留价的120%
- 每20秒检查一次

## 📁 **项目结构**

```
auction-game/
├── index.html              # 主HTML文件
├── styles.css              # 现代化渐变样式
├── app.js                  # 主应用入口（模块化架构）
├── modules/                # 功能模块
│   ├── constants.js        # 常量配置
│   ├── utils.js           # 工具函数
│   ├── storage.js         # 本地存储管理
│   ├── cloudStorage.js    # 云存储（Firebase）
│   ├── state.js           # 状态管理
│   ├── timer.js           # 定时器管理
│   ├── logger.js          # 日志系统
│   ├── auth.js            # 用户认证
│   ├── auction.js         # 拍卖核心逻辑
│   ├── ui.js              # UI渲染
│   ├── admin.js           # 管理员功能
│   ├── notification.js    # 通知系统
│   ├── achievement.js     # 成就系统
│   ├── countdown.js       # 倒计时管理
│   └── performance.js     # 性能优化
├── 一键部署指南.md         # 快速部署指南
├── 部署指南.md             # 详细部署文档
└── README.md              # 项目文档
```

## 🚀 快速开始（本地开发）

```bash
npm install
# 可选：启用云同步（默认开启）
# 将 env.example 复制为 .env.local，并填入你新建的 Firebase Web App 配置
# （如果不配，会自动回退到本地存储）
# cp env.example .env.local
npm run dev
```

然后访问：`http://localhost:8000/`

## 🌐 部署到 Firebase Hosting（一键）

详细步骤见：[`一键部署指南.md`](一键部署指南.md)

部署命令（需要先完成 Firebase 项目绑定/登录）：

```bash
npm run deploy
```

## 📊 **功能清单**

### 用户功能
- [x] 用户注册/登录系统
- [x] 虚拟钱包（初始10,000币）
- [x] 每日登录奖励（+500币）
- [x] 拍卖报名（一键/手动）
- [x] 竞价出价系统
- [x] 个人竞拍历史
- [x] 用户等级系统
- [x] 成就系统

### 拍卖功能
- [x] 3分钟倒计时
- [x] 15秒延时机制
- [x] 实时出价显示
- [x] 报名人数统计
- [x] 保留价机制
- [x] AI智能竞价
- [x] 出价历史记录
- [x] 拍卖品筛选（类别/价格/状态）

### 管理员功能
- [x] 发布拍卖品
- [x] 管理拍卖品
- [x] 删除拍卖品
- [x] 查看报名人数
- [x] 拍卖品归档

### 历史记录
- [x] 完整拍卖历史
- [x] 统计数据（场次/成交额/成交率）
- [x] 成交/流拍状态
- [x] 详细信息展示
- [x] localStorage永久保存

### UI/UX
- [x] 现代化渐变设计
- [x] 响应式布局
- [x] 流畅动画效果
- [x] 卡片式展示
- [x] 成就通知
- [x] 实时倒计时显示

## 🎁 **成就系统**

| 成就ID | 成就名称 | 解锁条件 |
|--------|----------|----------|
| first_bid | 初次竞拍 | 完成第一次出价 |
| first_win | 首场胜利 | 赢得第一场拍卖 |
| big_spender | 豪爽藏家 | 单次出价超过5000 |
| speed_bidder | 闪电竞拍 | 在最后10秒内赢得拍卖 |
| collector | 资深藏家 | 赢得5场拍卖 |

## 📦 **数据持久化**

### 本地存储（默认）
所有数据存储在浏览器 `localStorage` 中：

- `auctions` - 当前拍卖品数据
- `auctionHistory` - 历史拍卖记录
- `users` - 用户账户信息
- `lastUser` - 最后登录用户

**注意**：清除浏览器缓存会丢失所有游戏数据。

### 云同步（默认开启）
项目使用 **Firebase Realtime Database + Anonymous Auth**。当 `.env.local`（参考 `env.example`）配置完整时会自动启用云同步；否则自动回退到本地存储。

## 🎨 **拍卖品示例**

默认提供2件初始拍卖品：

1. **星夜**
   - 艺术家：文森特·梵高, 1889
   - 类别：油画
   - 起拍价：¥2,000

2. **思考者**
   - 艺术家：奥古斯特·罗丹, 1902
   - 类别：雕塑
   - 起拍价：¥3,500

## 🔧 **自定义设置**

### 修改倒计时
在 `app.js` 中修改 `timeLeft` 值（秒）：
```javascript
timeLeft: 180,  // 3分钟 = 180秒
```

### 修改延时时间
在 `app.js` 中搜索 `extendedTime` 并修改：
```javascript
auction.extendedTime = 15;  // 15秒延时
```

### 修改初始资金
在 `app.js` 的 `register` 函数中：
```javascript
balance: 10000,  // 初始10,000游戏币
```

### 添加管理员
在 `app.js` 的 `AppState` 中：
```javascript
adminUsers: ['admin', 'your_username']
```

### 修改AI竞价概率
在 `triggerAIBid` 函数中：
```javascript
if (Math.random() > 0.3) {  // 30%概率，改为0.5则为50%
    return;
}
```

## 🌐 **浏览器兼容性**

- ✅ Chrome 90+ （推荐）
- ✅ Firefox 88+
- ✅ Safari 14+
- ✅ Edge 90+
- ✅ 移动端浏览器

## 📱 **移动端优化**

- 响应式网格布局
- 触摸友好的按钮尺寸
- 自适应字体大小
- 单列卡片展示
- 优化的表单输入

## 🐛 **常见问题**

**Q: 如何重置所有数据？**
```javascript
// 在浏览器控制台(F12)中输入：
localStorage.clear()
// 然后刷新页面
```

**Q: 忘记密码怎么办？**
```
本地游戏无密码找回功能
建议清除数据后重新注册
```

**Q: 如何成为管理员？**
```
注册时使用用户名 "admin" 即可
```

**Q: 拍卖倒计时不准确？**
```
基于JavaScript定时器，精度约1秒
不适用于真实竞拍场景
```

**Q: 如何添加更多拍卖品？**
```
方法1: 使用管理员功能发布
方法2: 修改 app.js 中的 initAuctions 函数
```

**Q: 图片加载失败？**
```
检查图片URL是否有效
建议使用 Unsplash 等稳定图床
```

**Q: 如何启用云存储？**
```
1. 在 Firebase Console 创建项目并启用 Realtime Database
2. 复制配置信息到 modules/cloudStorage.js
3. 设置数据库规则允许读写
4. 刷新页面即可自动启用云存储
```

**Q: 云存储和本地存储的区别？**
```
- 本地存储：数据仅保存在当前浏览器，清除缓存会丢失
- 云存储：数据同步到云端，多设备可访问，需要配置 Firebase
- 如果未配置云存储，系统会自动使用本地存储
```

## 🔄 **更新日志**

### v3.0.0 (2025-12-11)
- 🏗️ 模块化重构，代码结构优化
- ☁️ 新增 Firebase 云存储支持（跨设备同步）
- 🎨 UI/UX 优化
- 🐛 修复多个已知问题
- 📝 文档完善

### v2.0.0 (2025-12-07)
- ✨ 新增管理员系统
- ✨ 新增报名功能（一键/手动）
- ✨ 改进倒计时机制（3分钟 + 15秒延时）
- ✨ 新增历史记录页面
- 🎨 全新现代化渐变UI设计
- 🎨 优化动画效果
- 📱 增强移动端体验
- 💾 完整的数据持久化

### v1.0.0 (初始版本)
- ✅ 基础拍卖功能
- ✅ 用户系统
- ✅ 虚拟钱包
- ✅ AI竞价
- ✅ 成就系统

## 🛠 **技术栈**

- **前端**: HTML5, CSS3, JavaScript (ES6+)
- **模块化**: ES6 Modules
- **字体**: Playfair Display (衬线), Lato (无衬线)
- **图标**: Font Awesome 6.4.0
- **存储**: localStorage + Firebase Realtime Database（可选）
- **架构**: 纯前端，模块化设计，无需后端

## 📄 **开源协议**

MIT License - 自由使用和修改

## 💬 **反馈与贡献**

欢迎提交 Issue 和 Pull Request！

---

**享受您的艺术收藏之旅！** 🎨✨

*由 Claude Code 精心打造*
