# 🚀 臻藏拍卖系统 - Web 部署指南

本指南将帮助您将臻藏拍卖系统部署到多个免费的 Web 平台。

参考项目：[website-to-compute](https://github.com/glitchdotcom/website-to-compute)

---

## 📋 部署选项对比

| 平台 | 免费额度 | 部署难度 | 推荐度 | 特点 |
|------|---------|---------|--------|------|
| **GitHub Pages** | ✅ 无限 | ⭐ 简单 | ⭐⭐⭐⭐⭐ | 与 GitHub 集成，自动部署 |
| **Netlify** | ✅ 100GB/月 | ⭐ 简单 | ⭐⭐⭐⭐⭐ | 自动部署，CDN 加速 |
| **Vercel** | ✅ 100GB/月 | ⭐ 简单 | ⭐⭐⭐⭐⭐ | 快速部署，全球 CDN |
| **Fastly Compute** | ⚠️ 需配置 | ⭐⭐⭐ 中等 | ⭐⭐⭐ | 边缘计算，高性能 |

---

## 🎯 方案一：GitHub Pages（推荐）

### 优点
- ✅ 完全免费
- ✅ 与 GitHub 完美集成
- ✅ 自动部署（推送代码即部署）
- ✅ 支持自定义域名
- ✅ HTTPS 自动启用

### 部署步骤

#### 1. 准备 GitHub 仓库

```bash
# 如果还没有 Git 仓库，初始化一个
git init
git add .
git commit -m "Initial commit: 臻藏拍卖系统"

# 在 GitHub 上创建新仓库，然后推送
git remote add origin https://github.com/你的用户名/auction-game.git
git branch -M main
git push -u origin main
```

#### 2. 启用 GitHub Pages

1. 打开 GitHub 仓库页面
2. 点击 **Settings** → **Pages**
3. 在 **Source** 中选择：
   - **Branch**: `main`
   - **Folder**: `/ (root)`
4. 点击 **Save**

#### 3. 使用 GitHub Actions 自动部署（已配置）

项目已包含 `.github/workflows/deploy.yml`，推送代码后会自动部署。

#### 4. 访问网站

部署完成后，访问：
```
https://你的用户名.github.io/auction-game/
```

### 自定义域名（可选）

1. 在仓库根目录创建 `CNAME` 文件：
```bash
echo "yourdomain.com" > CNAME
```

2. 在 DNS 提供商添加 CNAME 记录：
```
类型: CNAME
名称: @ 或 www
值: 你的用户名.github.io
```

---

## 🎯 方案二：Netlify（推荐）

### 优点
- ✅ 免费额度充足（100GB/月）
- ✅ 自动部署（连接 GitHub）
- ✅ 全球 CDN 加速
- ✅ 支持表单处理
- ✅ 预览部署

### 部署步骤

#### 方法一：通过 Netlify 网站（推荐）

1. **注册/登录 Netlify**
   - 访问 [netlify.com](https://www.netlify.com)
   - 使用 GitHub 账号登录

2. **导入项目**
   - 点击 **Add new site** → **Import an existing project**
   - 选择 **Deploy with GitHub**
   - 授权 Netlify 访问 GitHub
   - 选择 `auction-game` 仓库

3. **配置部署**
   - **Build command**: 留空（项目是纯静态的）
   - **Publish directory**: `.`（根目录）
   - 点击 **Deploy site**

4. **完成**
   - 等待部署完成（约 1-2 分钟）
   - 获得类似 `https://your-site-name.netlify.app` 的 URL

#### 方法二：通过 Netlify CLI

```bash
# 安装 Netlify CLI
npm install -g netlify-cli

# 登录
netlify login

# 初始化项目
netlify init

# 部署
netlify deploy --prod
```

### 配置文件

项目已包含 `netlify.toml`，包含：
- 发布目录配置
- 重定向规则（SPA 支持）
- 缓存策略
- 安全头部

---

## 🎯 方案三：Vercel（推荐）

### 优点
- ✅ 免费额度充足
- ✅ 极速部署（全球 CDN）
- ✅ 自动 HTTPS
- ✅ 预览部署
- ✅ 分析功能

### 部署步骤

#### 方法一：通过 Vercel 网站（推荐）

1. **注册/登录 Vercel**
   - 访问 [vercel.com](https://vercel.com)
   - 使用 GitHub 账号登录

2. **导入项目**
   - 点击 **Add New Project**
   - 选择 `auction-game` 仓库
   - 点击 **Import**

3. **配置部署**
   - **Framework Preset**: Other
   - **Root Directory**: `./`
   - 点击 **Deploy**

4. **完成**
   - 等待部署完成（约 1 分钟）
   - 获得类似 `https://your-site-name.vercel.app` 的 URL

#### 方法二：通过 Vercel CLI

```bash
# 安装 Vercel CLI
npm install -g vercel

# 部署
vercel

# 生产环境部署
vercel --prod
```

### 配置文件

项目已包含 `vercel.json`，包含：
- 静态文件配置
- 路由规则
- 缓存策略
- 安全头部

---

## 🎯 方案四：Fastly Compute（高级）

参考 [website-to-compute](https://github.com/glitchdotcom/website-to-compute) 项目。

### 优点
- ✅ 边缘计算（超低延迟）
- ✅ 高性能
- ✅ 全球 CDN

### 部署步骤

1. **安装 Fastly CLI**
```bash
npm install -g @fastly/cli
```

2. **登录 Fastly**
```bash
fastly login
```

3. **初始化项目**
```bash
fastly compute init
```

4. **部署**
```bash
fastly compute publish
```

> ⚠️ 注意：Fastly Compute 需要更多配置，适合有经验的开发者。

---

## 🔧 部署前检查清单

### ✅ 必需文件
- [x] `index.html` - 主页面
- [x] `app.js` - 主应用文件
- [x] `styles.css` - 样式文件
- [x] `modules/` - 模块目录
- [x] 所有资源文件

### ✅ 配置检查
- [x] `index.html` 中使用 `<script type="module">`
- [x] 所有模块路径正确
- [x] 外部资源（CDN）可访问

### ✅ 功能测试
- [x] 用户登录/注册
- [x] 拍卖出价
- [x] 管理员功能
- [x] 数据存储（localStorage）

---

## 🌐 部署后优化

### 1. 启用 HTTPS
所有平台都自动提供 HTTPS，无需额外配置。

### 2. 自定义域名
- **GitHub Pages**: 添加 `CNAME` 文件
- **Netlify**: Settings → Domain management
- **Vercel**: Settings → Domains

### 3. 性能优化
- ✅ 图片懒加载（已实现）
- ✅ 代码压缩（平台自动处理）
- ✅ CDN 加速（平台自动提供）
- ✅ 缓存策略（已配置）

### 4. 监控和分析
- **Netlify**: 内置分析功能
- **Vercel**: 内置分析功能
- **GitHub Pages**: 可集成 Google Analytics

---

## 🐛 常见问题

### Q1: 部署后页面空白？
**A**: 检查浏览器控制台错误，常见原因：
- ES6 模块路径错误
- 缺少 `.js` 扩展名
- CORS 问题（已解决，使用 HTTPS）

### Q2: 模块加载失败？
**A**: 确保：
- 使用相对路径：`./modules/xxx.js`
- 所有模块文件都已上传
- 浏览器支持 ES6 模块

### Q3: 样式丢失？
**A**: 检查：
- `styles.css` 文件路径
- CSS 文件是否上传
- 浏览器缓存（强制刷新 Ctrl+F5）

### Q4: localStorage 不工作？
**A**: localStorage 在 HTTPS 和 `localhost` 下正常工作，部署后应该没问题。

---

## 📊 部署状态检查

### GitHub Pages
```bash
# 检查 Actions 状态
# 访问: https://github.com/你的用户名/auction-game/actions
```

### Netlify
```bash
# 检查部署日志
# 访问: https://app.netlify.com/sites/你的站点名/deploys
```

### Vercel
```bash
# 检查部署状态
# 访问: https://vercel.com/你的用户名/auction-game
```

---

## 🎉 部署完成

部署成功后，您的网站将：
- ✅ 全球可访问
- ✅ 自动 HTTPS
- ✅ CDN 加速
- ✅ 自动更新（推送代码即更新）

### 分享您的网站
- 复制部署 URL
- 分享给朋友和用户
- 添加到社交媒体

---

## 📚 参考资源

- [GitHub Pages 文档](https://docs.github.com/en/pages)
- [Netlify 文档](https://docs.netlify.com/)
- [Vercel 文档](https://vercel.com/docs)
- [Fastly Compute 文档](https://www.fastly.com/documentation/guides/compute/)

---

## 🆘 需要帮助？

如果遇到问题：
1. 检查浏览器控制台错误
2. 查看平台部署日志
3. 参考本文档的常见问题
4. 查看平台官方文档

---

**祝您部署顺利！** 🚀

